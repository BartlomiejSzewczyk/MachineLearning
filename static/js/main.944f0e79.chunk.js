(this["webpackJsonpmovie-rate"]=this["webpackJsonpmovie-rate"]||[]).push([[0],{34:function(e,n,t){},42:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var a=t(4),i=t(2),r=t.n(i),o=t(11),c=t.n(o),s=t(9),u=t(7),l=t(8),f="(max-width: 1440px)",p="(min-width: 1441px)",d=t(21),b=(t(34),t(22));b.a.initializeApp({apiKey:"AIzaSyBCjEoB2RKgBw9zPHVWS-syRsv1Vm_889w",authDomain:"machinelearning-cfc59.firebaseapp.com",databaseURL:"https://machinelearning-cfc59.firebaseio.com",storageBucket:"machinelearning-cfc59.appspot.com"});var v=b.a,j=t(15);function g(){var e=Object(u.a)(["\n  font-size: 18px;\n  max-width: 450px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  background-color: ",";\n"]);return g=function(){return e},e}function h(){var e=Object(u.a)(["\n  font-size: 18px;\n  max-width: 450px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n\n"]);return h=function(){return e},e}function m(){var e=Object(u.a)(["\n  position: relative;\n  margin-top: 10px;\n  pointer-events: ",";\n  border-radius: 20px;\n  border: 1px solid black;\n  outline: none;\n  cursor: pointer;\n  left: 50%;\n  transform: translateX(-50%);\n  display: block;\n  padding 5px 10px 5px 10px;\n  @media "," {\n    font-size: 16px;\n  }\n  @media "," {\n    font-size: 18px;\n  }\n"]);return m=function(){return e},e}function O(){var e=Object(u.a)(["\n  position: relative;\n  text-align: center;\n  margin-top: 20px;\n  @media "," {\n    font-size: 18px;\n  }\n  @media "," {\n    font-size: 20px;\n  }\n"]);return O=function(){return e},e}function x(){var e=Object(u.a)(["\n  position: absolute;\n  top: 15%;\n  max-width: 30%;\n  left: 3%;\n  @media "," {\n    font-size: 18px;\n  }\n  @media "," {\n    font-size: 20px;\n  }\n"]);return x=function(){return e},e}function w(){var e=Object(u.a)(["\n  position: absolute;\n  width: 20%;\n  top: 50%;\n  transform: translateY(-50%);\n  right: 50px;\n"]);return w=function(){return e},e}function S(){var e=Object(u.a)(["\n  position: relative;\n  margin-top: 10px;\n  background: ",";\n  pointer-events: ",";\n  width: 150px;\n  max-width: 30%;\n  height: 50px;\n  border-radius: 20px;\n  border: 1px solid black;\n  color: white;\n  outline: none;\n  cursor: pointer;\n  left: 50%;\n  transform: translateX(-50%);\n  @media "," {\n    font-size: 20px;\n  }\n  @media "," {\n    font-size: 22px;\n  }\n"]);return S=function(){return e},e}function k(){var e=Object(u.a)(["\n  padding: 5px;\n  @media "," {\n    font-size: 22px;\n  }\n  @media "," {\n    font-size: 26px;\n  }\n"]);return k=function(){return e},e}function z(){var e=Object(u.a)(["\n  position: relative;\n  margin-top: 20px;\n  text-align: center;\n"]);return z=function(){return e},e}function y(){var e=Object(u.a)(["\n  position: relative;\n  margin-top: 20px;\n  width: 80%;\n  left: 10%;\n"]);return y=function(){return e},e}function E(){var e=Object(u.a)(["\n  position: relative;\n  text-align: center;\n  @media "," {\n    font-size: 40px;\n  }\n  @media "," {\n    font-size: 46px;\n  }\n"]);return E=function(){return e},e}function M(){var e=Object(u.a)(["\n  position: absolute;\n  top: 15%;\n  left: 35%;\n  width: 30%;\n  height: 80%;\n"]);return M=function(){return e},e}var N=l.a.div(M()),I=l.a.div(E(),f,p),J=l.a.div(y()),C=l.a.div(z()),F=l.a.label(k(),f,p),B=l.a.button(S(),(function(e){return e.disabled?"##4848716e":"#484871"}),(function(e){if(e.disabled)return"none"}),f,p),P=l.a.img(w()),D=l.a.div(x(),f,p),_=l.a.div(O(),f,p),L=l.a.button(m(),(function(e){if(e.disabled)return"none"}),f,p),R=l.a.select(h()),W=l.a.option(g(),(function(e){if(e.skipped)return"#c3c30b"})),A=function(){var e=Object(i.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],o=Object(i.useState)(""),c=Object(s.a)(o,2),u=c[0],l=c[1],f=Object(i.useState)(""),p=Object(s.a)(f,2),b=p[0],g=p[1],h=Object(i.useState)(new Map),m=Object(s.a)(h,2),O=m[0],x=m[1],w=Object(i.useState)(""),S=Object(s.a)(w,2),k=S[0],z=S[1],y=Object(i.useState)(""),E=Object(s.a)(y,2),M=E[0],A=E[1],K=Object(i.useState)(""),T=Object(s.a)(K,2),V=T[0],X=T[1],G=Object(i.useState)(""),H=Object(s.a)(G,2),U=H[0],Y=H[1],q=Object(i.useState)(!1),Q=Object(s.a)(q,2),Z=Q[0],$=Q[1],ee=Object(i.useState)({}),ne=Object(s.a)(ee,2),te=ne[0],ae=ne[1];Object(i.useEffect)((function(){var e=new Map;if(window.sessionStorage.getItem("skippedMovies")){var n=JSON.parse(window.sessionStorage.getItem("skippedMovies"));ae(n)}if(window.sessionStorage.getItem("ratingMap")){for(var t=0,a=Object.entries(JSON.parse(window.sessionStorage.ratingMap));t<a.length;t++){var i=Object(s.a)(a[t],2),o=i[0],c=i[1];e.set(o,c)}x(e)}if(window.sessionStorage.getItem("movies")&&window.sessionStorage.getItem("ratingMap")){var u=JSON.parse(window.sessionStorage.getItem("movies")),f=[];Object.keys(u).forEach((function(e,n){f.push({value:u[e],label:u[e]})})),r(f);var p=!1;f.forEach((function(n){e.get(n.value)||p||(l(n),p=!0)}))}else{var d=v.database().ref().child("movies"),b=[];d.on("value",(function(e){e.forEach((function(e){b.push({value:e.key,label:e.key})})),b=ce(b),r(b),l(b[0]);var n={};b.forEach((function(e,t){n[t]=e.value})),window.sessionStorage.setItem("movies",JSON.stringify(n))}))}}),[]),Object(i.useEffect)((function(){re(u)}),[u]);var ie=function(e){if(te[u.value]){var n=JSON.parse(JSON.stringify(te));n[u.value]=!1,ae(n),window.sessionStorage.setItem("skippedMovies",JSON.stringify(n))}var a=new Map(O);a.set(u.value,e),x(a);var i=0;t.forEach((function(e,n){e.value===u.value&&(i=n+1)})),t.length>i&&!O.get(t[i].value)?(l(t[i]),g("")):(i=oe(),t.length>i&&(l(t[i]),g("")));var r=Object.fromEntries(a);window.sessionStorage.setItem("ratingMap",JSON.stringify(r))},re=function(e){e&&v.database().ref().child("movies").child("".concat(e.value)).on("value",(function(e){fetch("https://api.themoviedb.org/3/movie/".concat(e.val(),"?api_key=72ed6ba834b7f05dc61a1e4fc27613dd&language=pl")).then((function(e){return e.json()})).then((function(e){z(e.poster_path),A(e.overview),X(e.release_date),e.genres&&Y(e.genres[0].name)}))}))},oe=function(){var e=t.length;return t.forEach((function(n,t){O.get(n.value)||n.value===u.value||(e=t)})),e},ce=function(e){for(var n,t,a=e.length;0!==a;)t=Math.floor(Math.random()*a),n=e[a-=1],e[a]=e[t],e[t]=n;return e};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(N,{children:[Object(a.jsx)(I,{children:"Wybierz film do oceny:"}),Object(a.jsx)(J,{children:Object(a.jsx)(R,{value:u.value,onChange:function(e){!function(e){l({value:e.target.value,label:e.target.value})}(e)},children:function(){var e=[];return t.forEach((function(n){e.push(Object(a.jsx)(W,{skipped:te[n.value],value:n.value,children:n.value}))})),e}()})}),u?Object(a.jsx)(C,{children:function(){for(var e=[],n=0;n<6;++n)e.push(Object(a.jsxs)(F,{for:n,children:[n,Object(a.jsx)(d.a,{className:"checkboxStyle",name:n,checked:O.get(u.value)?O.get(u.value)==="".concat(n):b==="".concat(n),onClick:function(e){g(e.target.name),ie(e.target.name)},children:"test"})]}));return e.push(Object(a.jsx)("br",{})),e.push(Object(a.jsx)("br",{})),e.push(Object(a.jsxs)(F,{for:-1,children:["Nie znam tego filmu",Object(a.jsx)(d.a,{className:"checkboxStyle",name:-1,checked:O.get(u.value)?"-1"===O.get(u.value):"-1"===b,onClick:function(e){g(e.target.name),ie(e.target.name)}})]})),e}()}):null,t.length?Object(a.jsxs)(_,{children:[O.size," / ",t.length]}):null,Object(a.jsx)(L,{onClick:function(){var e=0,n=JSON.parse(JSON.stringify(te));n[u.value]=!0,ae(n),window.sessionStorage.setItem("skippedMovies",JSON.stringify(n)),t.forEach((function(n,t){n.value===u.value&&(e=t+1)})),t.length>e&&!O.get(t[e].value)?(l(t[e]),g("")):(e=oe(),t.length>e&&(l(t[e]),g("")))},children:"Pomi\u0144"}),O.size===t.length&&t.length?Object(a.jsx)(B,{onClick:function(){var e=v.database().ref().child("rating"),n={};O.forEach((function(e,t){n[t]=e})),e.push(n),Object(j.b)("Dzi\u0119kuj\u0119my za ocenienie film\xf3w !"),$(!0)},disabled:Z,children:"Wy\u015blij"}):null]}),Object(a.jsxs)(D,{children:[U?"Gatunek: ".concat(U):null,U?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}):null,V?"Data premiery: ".concat(V):null,V?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}):null,M]}),k?Object(a.jsx)(P,{alt:"poster",src:"https://image.tmdb.org/t/p/original".concat(k)}):null]})};t(42),t(43);var K=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(A,{}),Object(a.jsx)(j.a,{position:"top-center",hideProgressBar:!0,autoClose:!1})]})},T=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,48)).then((function(n){var t=n.getCLS,a=n.getFID,i=n.getFCP,r=n.getLCP,o=n.getTTFB;t(e),a(e),i(e),r(e),o(e)}))};c.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(K,{})}),document.getElementById("root")),T()}},[[44,1,2]]]);
//# sourceMappingURL=main.944f0e79.chunk.js.map